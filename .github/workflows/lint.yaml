name: Lint 🌟

on:
  workflow_call:

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
    # Get the repos
    - name: Checkout workflow ⬇️
      uses: actions/checkout@v3
      with:
        repository: 'gauntface/workflows-static-site'
        path: 'workflows-static-site'
    - name: Checkout project ⬇️
      uses: actions/checkout@v3
      with:
        submodules: true
        path: 'project-repo'

    - name: Install action NPM Deps 🌎
      run: |
        cd ./workflows-static-site/
        npm install

    # Do our work
    - name: ESLint 🌟
      run: |
        cd ./workflows-static-site/
        npm run eslint    -- '../project-repo/' --no-error-on-unmatched-pattern

    - name: Stylelint 🌟
      run: |
        cd ./workflows-static-site/
        npm run stylelint -- '../project-repo/**/*.css'

    - name: Prettier 🌟
      run: |
        cd ./workflows-static-site/
        npm run prettier -- '../project-repo/**/*.css' --check

