name: Lint ğŸŒŸ

on:
  workflow_call:

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
    # Get the repos
    - name: Checkout workflow â¬‡ï¸
      uses: actions/checkout@v3
      with:
        repository: 'gauntface/workflows-static-site'
        path: 'workflows-static-site'
    - name: Checkout project â¬‡ï¸
      uses: actions/checkout@v3
      with:
        submodules: true
        path: 'project-repo'

    - name: Install action NPM Deps ğŸŒ
      run: |
        cd ./workflows-static-site/
        npm install

    # Do our work
    - name: ESLint ğŸŒŸ
      run: |
        cd ./workflows-static-site/
        npm run eslint    -- '../project-repo/' --no-error-on-unmatched-pattern

    - name: Stylelint ğŸŒŸ
      run: |
        cd ./workflows-static-site/
        npm run stylelint -- '../project-repo/**/*.css'

    - name: Prettier ğŸŒŸ
      run: |
        cd ./workflows-static-site/
        npm run prettier -- '../project-repo/**/*.css' --check

